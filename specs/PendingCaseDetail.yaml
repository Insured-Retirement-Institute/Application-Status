openapi: 3.1.0
info:
  title: Insurance Policy and Activity Status APIs
  description: APIs for managing insurance policy data including activity status, details, transmission, agents, parties, funding, documents, and more.
  version: 1.0.0
  license:
    name: MIT
    url: https://github.com/Insured-Retirement-Institute/Pending-Case/blob/main/LICENSE
paths:
  /v1/activity-statuses/searches:
    post:
      operationId: postActivityStatusSearch
      summary: Search for summary activity statuses
      description: Retrieve summary activity statuses based on search criteria.
      tags:
        - Activity Status
      parameters:
        - $ref: '#/components/parameters/correlationId'
        - $ref: '#/components/parameters/senderParticipantId'
        - $ref: '#/components/parameters/receiverParticipantId'
        - $ref: '#/components/parameters/brokerNumber'
        - $ref: '#/components/parameters/orderBy'
        - $ref: '#/components/parameters/sortOrder'
        - $ref: '#/components/parameters/start'
        - $ref: '#/components/parameters/limit'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SearchSummaryActivityStatusesRequest'
      responses:
        "200":
          description: Policy activity statuses successfully retrieved
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SummaryActivityStatusesPagedResult"
        "401":
          description: Unauthorized
  /v1/activity-statuses:
    get:
      operationId: getActivityStatuses
      summary: Retrieve summary activity statuses 
      description: Retrieve all summary activity statuses.
      tags:
        - Activity Status
      parameters:
        - $ref: '#/components/parameters/correlationId'
        - $ref: '#/components/parameters/senderParticipantId'
        - $ref: '#/components/parameters/receiverParticipantId'
        - $ref: '#/components/parameters/brokerNumber'
        - $ref: '#/components/parameters/policyNumber'
        - $ref: '#/components/parameters/associatedFirmId'
        - $ref: '#/components/parameters/cusip'
        - $ref: '#/components/parameters/producerNumber'
        - $ref: '#/components/parameters/npn'
        - $ref: '#/components/parameters/crdNumber'
        - $ref: '#/components/parameters/partyTaxId'
        - $ref: '#/components/parameters/applicationOriginId'
        - $ref: '#/components/parameters/trackingNumber'
        - $ref: '#/components/parameters/orderBy'
        - $ref: '#/components/parameters/sortOrder'
        - $ref: '#/components/parameters/start'
        - $ref: '#/components/parameters/limit'
      responses:
        "200":
          description: Policy activity statuses successfully retrieved
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SummaryActivityStatusesPagedResult"
        "401":
          description: Unauthorized
  /v1/activity-statuses/{policyNumber}:
    get:
      operationId: getActivityStatusByPolicyNumber
      summary: Retrieve a detail activity status
      description: Retrieve a detail activity status.
      tags:
        - Activity Status
      parameters:
        - $ref: '#/components/parameters/correlationId'
        - $ref: '#/components/parameters/senderParticipantId'
        - $ref: '#/components/parameters/receiverParticipantId'
        - $ref: '#/components/parameters/brokerNumber'
        - $ref: '#/components/parameters/policyNumberRequired'
        - $ref: '#/components/parameters/associatedFirmId'
      responses:
        "200":
          description: Policy activity status successfully retrieved
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DetailActivityStatus"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: NotFound
  /v1/policies:
    get:
      operationId: getPolicies
      summary: Retrieve policies
      description: Retrieve all policies.
      tags:
        - Policy
      parameters:
        - $ref: '#/components/parameters/correlationId'
        - $ref: '#/components/parameters/senderParticipantId'
        - $ref: '#/components/parameters/receiverParticipantId'
        - $ref: '#/components/parameters/brokerNumber'
        - $ref: '#/components/parameters/policyNumber'
        - $ref: '#/components/parameters/associatedFirmId'
        - $ref: '#/components/parameters/cusip'
        - $ref: '#/components/parameters/producerNumber'
        - $ref: '#/components/parameters/npn'
        - $ref: '#/components/parameters/crdNumber'
        - $ref: '#/components/parameters/partyTaxId'
        - $ref: '#/components/parameters/applicationOriginId'
        - $ref: '#/components/parameters/trackingNumber'
        - $ref: '#/components/parameters/orderBy'
        - $ref: '#/components/parameters/sortOrder'
        - $ref: '#/components/parameters/start'
        - $ref: '#/components/parameters/limit'
      responses:
        "200":
          description: Policies successfully retrieved
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PoliciesPagedResult"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  /v1/activity-statuses/policies/{policyNumber}:
    get:
      operationId: getPolicyByPolicyNumber
      summary: Retrieve a policy
      description: Retrieve primary data of a policy.
      tags:
        - Policy
      parameters:
        - $ref: '#/components/parameters/correlationId'
        - $ref: '#/components/parameters/senderParticipantId'
        - $ref: '#/components/parameters/receiverParticipantId'
        - $ref: '#/components/parameters/brokerNumber'
        - $ref: '#/components/parameters/policyNumberRequired'
        - $ref: '#/components/parameters/associatedFirmId'
      responses:
        "200":
          description: Policy successfully retrieved
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Policy"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: NotFound
  /v1/activity-statuses/policies/{policyNumber}/producers:
    get:
      operationId: getPolicyProducersByPolicyNumber
      summary: Retrieve the producers of a policy
      description: Retrieve producer data of a policy.
      tags:
        - Policy
      parameters:
        - $ref: '#/components/parameters/correlationId'
        - $ref: '#/components/parameters/senderParticipantId'
        - $ref: '#/components/parameters/receiverParticipantId'
        - $ref: '#/components/parameters/policyNumberRequired'
        - $ref: '#/components/parameters/associatedFirmId'
      responses:
        "200":
          description: Policy parties successfully retrieved
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Producers"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: NotFound
  /v1/activity-statuses/policies/{policyNumber}/parties:
    get:
      operationId: getPolicyPartiesByPolicyNumber
      summary: Retrieve the parties of a policy
      description: Retrieve party data of a policy.
      tags:
        - Policy
      parameters:
        - $ref: '#/components/parameters/correlationId'
        - $ref: '#/components/parameters/senderParticipantId'
        - $ref: '#/components/parameters/receiverParticipantId'
        - $ref: '#/components/parameters/brokerNumber'
        - $ref: '#/components/parameters/policyNumberRequired'
        - $ref: '#/components/parameters/associatedFirmId'
      responses:
        "200":
          description: Policy parties successfully retrieved
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Parties"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: NotFound
  /v1/activity-statuses/policies/{policyNumber}/fundings:
    get:
      operationId: getFundingStatusByPolicyNumber
      summary: Retrieve policy funding data
      description: Retrieve funding data of a policy.
      tags:
        - Policy
      parameters:
        - $ref: '#/components/parameters/correlationId'
        - $ref: '#/components/parameters/senderParticipantId'
        - $ref: '#/components/parameters/receiverParticipantId'
        - $ref: '#/components/parameters/brokerNumber'
        - $ref: '#/components/parameters/policyNumberRequired'
        - $ref: '#/components/parameters/associatedFirmId'
      responses:
        "200":
          description: Policy funding successfully retrieved
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Funding"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: NotFound
  /v1/activity-statuses/policies/{policyNumber}/document-reviews:
    get:
      operationId: getDocumentReviewStatusByPolicyNumber
      summary: Retrieve policy document review data
      description: Retrieve document review data of a policy.
      tags:
        - Policy
      parameters:
        - $ref: '#/components/parameters/correlationId'
        - $ref: '#/components/parameters/senderParticipantId'
        - $ref: '#/components/parameters/receiverParticipantId'
        - $ref: '#/components/parameters/brokerNumber'
        - $ref: '#/components/parameters/policyNumberRequired'
        - $ref: '#/components/parameters/associatedFirmId'
      responses:
        "200":
          description: Policy document review successfully retrieved
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DocumentReview"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: NotFound
  /v1/activity-statuses/policies/{policyNumber}/suitability:
    get:
      operationId: getSuitabilityInformationByPolicyNumber
      summary: Retrieve policy suitability data
      description: Retrieve suitability data of a policy.
      tags:
        - Policy
      parameters:
        - $ref: '#/components/parameters/correlationId'
        - $ref: '#/components/parameters/senderParticipantId'
        - $ref: '#/components/parameters/receiverParticipantId'
        - $ref: '#/components/parameters/brokerNumber'
        - $ref: '#/components/parameters/policyNumberRequired'
        - $ref: '#/components/parameters/associatedFirmId'
      responses:
        "200":
          description: Policy suitability successfully retrieved
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Suitability"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: NotFound
  /v1/activity-statuses/policies/{policyNumber}/can-sell-validations:
    get:
      operationId: getCanSellValidationByPolicyNumber
      summary: Retrieve policy can sell validation data
      description: Retrieve can sell valiation data of a policy.
      tags:
        - Policy
      parameters:
        - $ref: '#/components/parameters/correlationId'
        - $ref: '#/components/parameters/senderParticipantId'
        - $ref: '#/components/parameters/receiverParticipantId'
        - $ref: '#/components/parameters/brokerNumber'
        - $ref: '#/components/parameters/policyNumberRequired'
        - $ref: '#/components/parameters/associatedFirmId'
      responses:
        "200":
          description: Policy can sell validation successfully retrieved
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CanSellValidation"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: NotFound
components:
  parameters:
    correlationId:
      name: correlationId
      description: Optional custom header to be returned to the caller in response payload
      in: header
      required: false
      schema:
        type: string
    senderParticipantId:
      name: senderParticipantId
      description: Optional custom header identifying the sender of the call
      in: header
      required: false
      schema:
        type: string
    receiverParticipantId:
      name: receiverParticipantId
      description: Optional custom header identifying the receiver of the call
      in: header
      required: false
      schema:
        type: string
    brokerNumber:
      name: brokerNumber
      description: Optional custom header identifying the broker number of the call
      in: header
      required: false
      schema:
        type: string
    policyNumberRequired:
      name: policyNumber
      description: Required query parameter for the policy number to be retrieved
      in: query
      required: false
      schema:
        type: string
    policyNumber:
      name: policyNumber
      in: query
      required: false
      schema:
        type: string
    associatedFirmId:
      name: associatedFirmId
      description: Optional query parameter for the associated firm ID
      in: query
      required: false
      schema:
        type: string
    cusip:
      name: cusip
      description: Optional query parameter for the CUSIP
      in: query
      required: false
      schema:
        type: string
    producerNumber:
      name: producerNumber
      description: Optional query parameter for the producer number
      in: query
      required: false
      schema:
        type: string
    npn:
      name: npn
      description: Optional query parameter for the NPN
      in: query
      required: false
      schema:
        type: string
    crdNumber:
      name: crdNumber
      description: Optional query parameter for the CRD number
      in: query
      required: false
      schema:
        type: string
    partyTaxId:
      name: partyTaxId
      description: Optional query parameter for the party tax ID
      in: query
      required: false
      schema:
        type: string
    applicationOriginId:
      name: applicationOriginId
      description: Optional query parameter for the application origin ID
      in: query
      required: false
      schema:
        type: string
    trackingNumber:
      name: trackingNumber
      description: Optional query parameter for the delivery tracking number
      in: query
      required: false
      schema:
        type: string
    orderBy:
      name: orderBy
      description: Order by for pagination
      in: query
      required: false
      schema:
        type: string
        enum: [policyNumber, status]
        default: policyNumber
    sortOrder:
      name: sortOrder
      description: Sort order for pagination
      in: query
      required: false
      schema:
        type: string
        enum: [asc, desc]
        default: asc
    start:
      name: start
      description: Starting item for pagination
      in: query
      required: false
      schema:
        type: integer
        default: 1
    limit:
      name: limit
      description: Number of items returned
      in: query
      required: false
      schema:
        type: integer
        default: 100
        minimum: 1
        maximum: 1000
  schemas:
    IndividualIdentity:
      description: Schema for individual identity data
      type: object
      properties:
        type:
          type: string
          const: individual
        firstName:
          type: string
        middleName:
          type: string
        lastName:
          type: string
        taxId:
          type: string
    IndividualProducer:
      description: Schema for individual producer data
      type: object
      allOf:
        - $ref: "#/components/schemas/IndividualIdentity"
        - type: object
          properties:
            npn:
              type: string
            crdNumber:
              type: string
            relationships:
              type: array
              items:
                type: string
                enum:
                  - primaryAgent
                  - secondaryAgent
                  - additionalAgent
                  - investmentAdvisorRepresentative
    IndividualParty:
      description: Schema for individual party data
      type: object
      allOf:
        - $ref: "#/components/schemas/IndividualIdentity"
        - $ref: "#/components/schemas/PartyRelationship"
    EntityIdentity:
      description: Schema for entity identity data
      type: object
      properties:
        type:
          type: string
          const: entity
        name:
          type: string
        taxId:
          type: string
    EntityProducer:
      description: Schema for entity producer data
      type: object
      allOf:
        - $ref: "#/components/schemas/EntityIdentity"
        - type: object
          properties:
            npn:
              type: string
            crdNumber:
              type: string
            relationships:
              type: array
              items:
                type: string
                enum:
                  - brokerageGeneralAgency
                  - registeredInvestmentAdvisoryFirm
                  - independentMarketingOrganization
    EntityParty:
      description: Schema for entity party data
      type: object
      allOf:
        - $ref: "#/components/schemas/EntityIdentity"
        - $ref: "#/components/schemas/PartyRelationship"
    PartyRelationship:
      description: Schema for party relationship data
      type: object
      properties:
        relationships:
          type: array
          items:
            type: string
            enum:
              - owner
              - jointOwner
              - annuitant
              - jointAnnuitant
              - primaryBeneficiary
              - contingentBeneficiary
    Producers:
      description: Schema for producers data
      type: array
      items:
        anyOf:
          - $ref: "#/components/schemas/IndividualProducer"
          - $ref: "#/components/schemas/EntityProducer"
    Parties:  
      description: Schema for parties data
      type: array
      items:
        anyOf:
          - $ref: "#/components/schemas/IndividualParty"
          - $ref: "#/components/schemas/EntityParty"
    CanSellValidation:
      description: Schema for policy can sell validation data
      type: object
      properties:
        status:
          type: string
          enum: [awaitingReview, inProgress, completed]
        isActionNeeded:
          type: boolean
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        note:
          type: string
        issues:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                enum:
                  - trainingIncompleteMissing
                  - trainingExpired
                  - agentNotAppointedForSale
                  - jitAppointmentInProgress
                  - agentNotLicensed
                  - other
              note:
                type: string
              affectedProducer:
                type: object
                properties:
                  npn:
                    type: string
                  crdNumber:
                    type: string
                  taxId:
                    type: string
    Suitability:
      description: Schema for policy suitability data
      type: object
      properties:
        status:
          type: string
          enum: [awaitingReview, inProgress, completed, notApplicable]
        isActionNeeded:
          type: boolean
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        reason:
          type: string
          enum:
            - moreInformationNeeded
            - notSuitableForClient
            - other
        note:
          type: string
        dueDate:
          type: string
          format: date
    DocumentReview:
      description: Schema for policy document review data
      type: object
      properties:
        status:
          type: string
          enum: [awaitingReview, inProgress, completed]
        isActionNeeded:
          type: boolean
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        note:
          type: string
        issues:
          type: array
          items:
            type: object
            properties:
              reason:
                type: string
                enum:
                  - applicationIssue
                  - contactCarrier
                  - incompleteForm
                  - missingForm
                  - missingSignature
                  - needClarity
                  - other
              formName:
                type: string
              formNumber:
                type: string
              dueDate:
                type: string
                format: date
              note:
                type: string
    Funding:
      description: Schema for policy funding data
      type: object
      properties:
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        isActionNeeded:
          type: boolean
        status:
          type: string
          enum: [awaitingReview, inProgress, completed]
        note:
          type: string
        sources:
          type: array
          items:
            type: object
            properties:
              method:
                type: string
                enum:
                  - anotherPolicy
                  - check
                  - clearinghouse
                  - creditCard
                  - debitCard
                  - digitalPayment
                  - electronicFundTransfer
                  - payrollDeduction
                  - wireTransfer
              type:
                type: string
                enum:
                  - contribution
                  - directRollover
                  - employeeContribution
                  - employerContribution
                  - full1035Exchange
                  - indirectRollover
                  - nonQualifiedTransferOfAssets
                  - partial1035Exchange
                  - qualifiedTransfer
              isActionNeeded:
                type: boolean
              anticipatedAmount:
                type: number
                format: float
              receivedAmount:
                type: number
                format: float
              receivedDate:
                type: string
                format: date
              status:
                type: string
                enum: [inProgress, complete]
              reason:
                type: string
                enum:
                  - awaitingFundsFromCedingCompany
                  - contactTheCarrier
                  - fundingDiscrepancy
                  - nigoAtCedingCarrier
                  - noFundsReceivedCash
                  - pendingReg60
                  - other
              effectiveDate:
                type: string
                format: date
              note:
                type: string
              cedingCompany:
                type: object
                properties:
                  name:
                    type: string
                  accountNumber:
                    type: string
                  startDate:
                    type: string
                    format: date
                  referenceNumber:
                    type: string
                  nextActivityDate:
                    type: string
                    format: date
                  note:
                    type: string

    PolicySummary:
      description: Schema for policy summary data
      type: object
      properties:
        policyNumber:
          type: string
        associatedFirmId:
          type: string
        applicationOrigin:
          type: object
          properties:
            platform:
              type: string
            isElectronic:
              type: boolean
            id:
              type: string
        cusip:
          type: string
        productName:
          type: string
        isQualified:
          type: boolean
        status:
          type: string
          enum: [received, inProgress, completed, cancelled]
        delivery:
          type: object
          properties:
            sentDate:
              type: string
              format: date
            method:
              type: string
              enum:
                - fedex
                - ups
                - electronicDelivery
                - handDelivery
                - usps
            trackingNumber:
              type: string
    Policy:
      description: Schema for policy data
      type: object
      allOf:
        - $ref: '#/components/schemas/PolicySummary'
      properties:
        isActionNeeded:
          type: boolean
        actionSections:
          type: string
          enum: [suitability, cansellvalidation, documentReview, funding]
        signedDate:
          type: string
          format: date
        receivedDate:
          type: string
          format: date
        issuedDate:
          type: string
          format: date
        effectiveDate:
          type: string
          format: date
        rateEffectiveDate:
          type: string
          format: date
        fundsHeldUntilDate:
          type: string
          format: date
        cancellation:
          type: object
          properties:
            initiator:
              type: string
              enum: [advisor, carrier, client]
            cancelledDate:
              type: string
              format: date
            reason:
              type: string
        caseManager:
          type: object
          properties:
            fullName:
              type: string
            phoneNumber:
              type: string
            emailAddress:
              type: string
            websiteURL:
              type: string        
    Policies:
      description: Schema for policies
      type: array
      items:
        allOf:
          - $ref: '#/components/schemas/PolicySummary'
          - type: object
    PoliciesPagedResult:
      description: Schema for the paged result of policies
      type: object
      properties:
        startIndex:
          type: integer
        itemsCount:
          type: integer
        totalItemsCount:
          type: integer
          maxValue: 1000
        policies:
          $ref: "#/components/schemas/Policies"
    DetailActivityStatus:
      description: Schema for detail activity status
      type: object
      allOf:
        - type: object
          properties:
            correlationId:
              type: string
              description: Correlation ID for tracking the request    
        - $ref: '#/components/schemas/Policy'
        - type: object
          properties:
            producers:
              $ref: "#/components/schemas/Producers"
            parties:
              $ref: "#/components/schemas/Parties"
            canSellValidations:
              $ref: "#/components/schemas/CanSellValidation"
            documentReviews:
              $ref: "#/components/schemas/DocumentReview"
            suitability:
              $ref: "#/components/schemas/Suitability"
            fundings:
              $ref: "#/components/schemas/Funding"
    SummaryActivityStatus:
      description: Schema for summary activity status
      type: object
      allOf:
        - $ref: '#/components/schemas/PolicySummary'
        - type: object
          properties:
            producers:
              $ref: "#/components/schemas/Producers"
            parties:
              $ref: "#/components/schemas/Parties"
    SummaryActivityStatuses:
      description: Schema for activity statuses
      type: array
      items:
        allOf:
          - $ref: '#/components/schemas/SummaryActivityStatus'
          - type: object
    SummaryActivityStatusesPagedResult:
      description: Schema for the paged result of activity statuses
      type: object
      properties:
        correlationId:
          type: string
        startIndex:
          type: integer
        itemsCount:
          type: integer
          maxValue: 1000
        totalItemsCount:
          type: integer
        activityStatuses:
          $ref: "#/components/schemas/SummaryActivityStatuses"
    SearchSummaryActivityStatusesRequest:
      description: Schema for searching summary activity statuses
      type: object
      properties:
        policyNumber:
          type: string
        associatedFirmId:
          type: string
        cusip:
          type: string
        producerNumber:
          type: string
        npn: 
          type: string
        crdNumber:
          type: string
        partyTaxId:
          type: string
        applicationOriginId:
          type: string
        trackingNumber:
          type: string
      additionalProperties: false
